$(function () {
	sliderInit()
	imgRevealer()
	replaceHash()
	lenisSetup()
	AOS.init({
		duration: 1500,
		disable: "mobile",
	});
	window.addEventListener("scroll", function () {
		const header = document.querySelector(".header");
		if (window.scrollY > 50) {
			header.classList.add("is-sticky");
		} else {
			header.classList.remove("is-sticky");
		}
	});
})

function preLoader() {
	const tl = gsap.timeline({
		duration: 0.1
	});
	tl.to('.preLoader.black > img', {
			delay: 1,
			y: 50,
			autoAlpha: 0
		})
		.to('.preLoader.black', {
			yPercent: -100
		})
		.to('.preLoader.white', {
			yPercent: -100
		})
		.to('.preLoader', {
			css: {
				display: 'none'
			}
		})
		.from('.navbar-brand > img', {
			x: -50,
			autoAlpha: 0
		})
		.from(
			'.navbar-nav > li, .form-inline a', {
				autoAlpha: 0,
				x: 100,
				stagger: 0.05
			},
			'>-0.5'
		)
		.from('.slideOne', {
			autoAlpha: 0,
			yPercent: 100,
			stagger: 0.05
		})
		.from(
			'.bg-image', {
				autoAlpha: 0
			},
			'<-0.25'
		);
}

function lenisSetup() {
	const lenis = new Lenis({
		duration: 1.5,
		easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
		smooth: true,
		mouseMultiplier: 1,
	});

	function raf(time) {
		lenis.raf(time);
		requestAnimationFrame(raf);
	}
	requestAnimationFrame(raf);
	document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
		anchor.addEventListener("click", function (e) {
			e.preventDefault();
			lenis.scrollTo(this.getAttribute("href"));
		});
	});
	// lenis.scrollTo("top");
}

function replaceHash() {
	document.querySelectorAll("a").forEach((a) => {
		let href = a.getAttribute("href");
		a.href = href ?
			href.startsWith("#") && href.endsWith("#") ?
			href.replace("#", "javascript:void(0)") :
			href :
			"javascript:void(0)";
	});
}

function sliderInit() {
	var partners_slider = new Swiper('.partners_slider', {
		loop: true,
		freeMode: true,
		autoplay: {
			delay: 1,
			disableOnInteraction: true,
			reverseDirection: false,
		},
		speed: 5000,
		slidesPerView: 1.5,
		spaceBetween: 20,
		breakpoints: {
			1446: {
				slidesPerView: 6,
				spaceBetween: 30
			},
			992: {
				slidesPerView: 5,
				spaceBetween: 20
			},
			768: {
				slidesPerView: 4,
				spaceBetween: 20
			},
			520: {
				slidesPerView: 3,
				spaceBetween: 20
			},
			322: {
				slidesPerView: 2,
				spaceBetween: 20
			},
		},
	});
}

function imgRevealer() {
	let revealContainers = document.querySelectorAll('.reveal');
	revealContainers.forEach((container) => {
		let image = container.querySelector('img');
		let revelerTl = gsap.timeline({
			scrollTrigger: {
				trigger: container,
				toggleActions: 'restart none none reverse'
			}
		});
		revelerTl.set(container, {
			autoAlpha: 1
		});
		revelerTl.from(container, 0.75, {
			xPercent: -100,
			ease: Power2.out
		});
		revelerTl.from(image, 0.75, {
			xPercent: 100,
			scale: 1.3,
			delay: -0.75,
			ease: Power2.out
		});
	});
}